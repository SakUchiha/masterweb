(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var s=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storageKey="kidlearner_progress",this.achievements={first_lesson:{name:"First Steps",description:"Completed your first lesson",icon:"🎯",points:10},code_master:{name:"Code Master",description:"Completed 5 lessons",icon:"👑",points:50},ai_helper:{name:"AI Assistant",description:"Asked AI for help 10 times",icon:"🤖",points:25},validator:{name:"Code Explainer",description:"Explained code 20 times",icon:"✅",points:30},streak_7:{name:"Week Warrior",description:"7-day learning streak",icon:"🔥",points:40},editor_pro:{name:"Editor Pro",description:"Saved 10 code files",icon:"💾",points:20},quiz_champion:{name:"Quiz Champion",description:"Scored 100% on 3 quizzes",icon:"🏆",points:60},speed_demon:{name:"Speed Demon",description:"Completed a lesson in under 5 minutes",icon:"⚡",points:35},perfectionist:{name:"Perfectionist",description:"Perfect score on 5 consecutive quizzes",icon:"💎",points:75},explorer:{name:"Explorer",description:"Tried all 3 programming languages",icon:"🗺️",points:45}},this.levels=[{level:1,name:"Beginner",pointsRequired:0,badge:"🌱"},{level:2,name:"Novice",pointsRequired:50,badge:"🌿"},{level:3,name:"Apprentice",pointsRequired:150,badge:"🌳"},{level:4,name:"Coder",pointsRequired:300,badge:"💻"},{level:5,name:"Developer",pointsRequired:500,badge:"👨‍💻"},{level:6,name:"Expert",pointsRequired:750,badge:"🧙‍♂️"},{level:7,name:"Master",pointsRequired:1e3,badge:"🏆"},{level:8,name:"Grandmaster",pointsRequired:1250,badge:"👑"},{level:9,name:"Legend",pointsRequired:1500,badge:"⭐"},{level:10,name:"Mythical",pointsRequired:2e3,badge:"🦄"}],this.init()},n=[{key:"init",value:function(){this.getProgress()||this.resetProgress()}},{key:"getProgress",value:function(){try{var e=JSON.parse(localStorage.getItem(this.storageKey))||null;return e&&null==e.codeExplanations&&"number"==typeof e.codeValidations&&(e.codeExplanations=e.codeValidations),e}catch(e){return null}}},{key:"saveProgress",value:function(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){}}},{key:"resetProgress",value:function(){var e={lessonsCompleted:[],totalLessons:0,aiInteractions:0,codeExplanations:0,codeValidations:0,filesSaved:0,lastActiveDate:(new Date).toISOString().split("T")[0],currentStreak:0,longestStreak:0,achievements:[],timeSpent:0,startDate:(new Date).toISOString(),quizScores:[],totalQuizScore:0,averageQuizScore:0,points:0,level:1,experiencePoints:0,dailyGoals:{lessons:0,quizzes:0,timeSpent:0},weeklyGoals:{lessons:7,quizzes:5,timeSpent:210},learningPath:"beginner",preferredDifficulty:"beginner",subjectProgress:{html:{completed:0,total:0,averageScore:0},css:{completed:0,total:0,averageScore:0},javascript:{completed:0,total:0,averageScore:0}},studyReminders:[],lastReminderDate:null};this.saveProgress(e)}},{key:"completeLesson",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.getProgress();r.lessonsCompleted.includes(e)||(r.lessonsCompleted.push(e),r.totalLessons=r.lessonsCompleted.length,r.timeSpent+=t,n&&r.subjectProgress[n]&&r.subjectProgress[n].completed++,this.addPoints(15,r),t>0&&t<5&&this.unlockAchievement("speed_demon",r),this.updateStreak(),this.checkAchievements(r),this.updateLearningPath(r),this.saveProgress(r))}},{key:"incrementAIInteractions",value:function(){var e=this.getProgress();e.aiInteractions++,this.checkAchievements(e),this.saveProgress(e)}},{key:"incrementValidations",value:function(){this.incrementExplanations()}},{key:"incrementFilesSaved",value:function(){var e=this.getProgress();e.filesSaved++,this.checkAchievements(e),this.saveProgress(e)}},{key:"updateStreak",value:function(){var e=this.getProgress(),t=(new Date).toISOString().split("T")[0],n=e.lastActiveDate;if(n!==t){var r=new Date;r.setDate(r.getDate()-1),n===r.toISOString().split("T")[0]?(e.currentStreak++,e.currentStreak>e.longestStreak&&(e.longestStreak=e.currentStreak)):e.currentStreak=1,e.lastActiveDate=t,this.checkAchievements(e),this.saveProgress(e)}}},{key:"checkAchievements",value:function(e){var t=this,n=[];e.totalLessons>=1&&!e.achievements.includes("first_lesson")&&n.push("first_lesson"),e.totalLessons>=5&&!e.achievements.includes("code_master")&&n.push("code_master"),e.aiInteractions>=10&&!e.achievements.includes("ai_helper")&&n.push("ai_helper"),("number"==typeof e.codeExplanations?e.codeExplanations:e.codeValidations||0)>=20&&!e.achievements.includes("validator")&&n.push("validator"),e.currentStreak>=7&&!e.achievements.includes("streak_7")&&n.push("streak_7"),e.filesSaved>=10&&!e.achievements.includes("editor_pro")&&n.push("editor_pro"),e.quizScores.filter(function(e){return 100===e.score}).length>=3&&!e.achievements.includes("quiz_champion")&&n.push("quiz_champion");var r,i=e.quizScores.slice(-5);i.length>=5&&i.every(function(e){return 100===e.score})&&!e.achievements.includes("perfectionist")&&n.push("perfectionist"),Object.values(e.subjectProgress).filter(function(e){return e.completed>0}).length>=3&&!e.achievements.includes("explorer")&&n.push("explorer"),n.length>0&&((r=e.achievements).push.apply(r,n),this.showAchievementNotification(n),n.forEach(function(n){t.achievements[n]&&t.addPoints(t.achievements[n].points,e)}),this.saveProgress(e))}},{key:"showAchievementNotification",value:function(e){var t=this;e.forEach(function(e){var n=t.achievements[e];n&&setTimeout(function(){alert("🏆 Achievement Unlocked!\n\n".concat(n.icon," ").concat(n.name,"\n").concat(n.description))},1e3)})}},{key:"getStats",value:function(){var e=this,t=this.getProgress(),n=this.getCurrentLevel(t.points),r=this.levels.find(function(e){return e.level===n.level+1});return{lessonsCompleted:t.totalLessons,aiInteractions:t.aiInteractions,codeExplanations:"number"==typeof t.codeExplanations?t.codeExplanations:t.codeValidations||0,filesSaved:t.filesSaved,currentStreak:t.currentStreak,longestStreak:t.longestStreak,achievementsCount:t.achievements.length,totalAchievements:Object.keys(this.achievements).length,achievements:t.achievements.map(function(t){return e.achievements[t]}),totalQuizScore:t.totalQuizScore,averageQuizScore:t.averageQuizScore,points:t.points,level:n,nextLevel:r,experiencePoints:t.experiencePoints,timeSpent:t.timeSpent,learningPath:t.learningPath,preferredDifficulty:t.preferredDifficulty,subjectProgress:t.subjectProgress,dailyGoals:t.dailyGoals,weeklyGoals:t.weeklyGoals,completionRate:t.totalLessons>0?t.quizScores.filter(function(e){return e.score>=70}).length/t.quizScores.length*100:0}}},{key:"incrementExplanations",value:function(){var e=this.getProgress();"number"!=typeof e.codeExplanations&&(e.codeExplanations=e.codeValidations||0),e.codeExplanations++,this.checkAchievements(e),this.saveProgress(e)}},{key:"addTimeSpent",value:function(e){var t=this.getProgress();t.timeSpent+=e,this.saveProgress(t)}},{key:"isLessonCompleted",value:function(e){return this.getProgress().lessonsCompleted.includes(e)}},{key:"exportProgress",value:function(){return this.getProgress()}},{key:"importProgress",value:function(e){try{return this.saveProgress(e),!0}catch(e){return!1}}},{key:"recordQuizScore",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.getProgress(),s={lessonId:e,score:t,date:(new Date).toISOString(),timeSpent:n};if(i.quizScores.push(s),i.totalQuizScore+=t,i.averageQuizScore=i.totalQuizScore/i.quizScores.length,r&&i.subjectProgress[r]){var o=i.subjectProgress[r];o.total++,o.averageScore=(o.averageScore*(o.total-1)+t)/o.total}var a=Math.floor(t/10);100===t&&(a+=10),this.addPoints(a,i),i.dailyGoals.quizzes++,this.checkAchievements(i),this.updateLearningPath(i),this.saveProgress(i)}},{key:"addPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=this.getProgress()),t.points+=e,t.experiencePoints+=e;var n=this.calculateLevel(t.points);n>t.level&&(t.level=n,this.showLevelUpNotification(n))}},{key:"calculateLevel",value:function(e){for(var t=this.levels.length-1;t>=0;t--)if(e>=this.levels[t].pointsRequired)return this.levels[t].level;return 1}},{key:"getCurrentLevel",value:function(e){var t=this;return this.levels.find(function(n){return n.level===t.calculateLevel(e)})||this.levels[0]}},{key:"showLevelUpNotification",value:function(e){var t=this.levels.find(function(t){return t.level===e});t&&setTimeout(function(){alert("🎉 Level Up! ".concat(t.badge," ").concat(t.name,"\n\nYou've reached level ").concat(e,"!"))},500)}},{key:"updateLearningPath",value:function(e){var t=e.averageQuizScore,n=e.totalLessons;n>=20&&t>=85?(e.learningPath="advanced",e.preferredDifficulty="advanced"):n>=10&&t>=70?(e.learningPath="intermediate",e.preferredDifficulty="intermediate"):(e.learningPath="beginner",e.preferredDifficulty="beginner")}},{key:"getRecommendedLessons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getProgress(),n=new Set(t.lessonsCompleted);return e.filter(function(e){return!n.has(e.id)}).sort(function(e,n){var r=e.difficulty===t.preferredDifficulty?1:0,i=n.difficulty===t.preferredDifficulty?1:0;if(r!==i)return i-r;var s=t.subjectProgress[e.subject.toLowerCase()]||{completed:0},o=t.subjectProgress[n.subject.toLowerCase()]||{completed:0};return s.completed-o.completed})}},{key:"getProgressAnalytics",value:function(){var e=this.getProgress(),t=new Date,n=new Date(t.getTime()-6048e5),r=e.quizScores.filter(function(e){return new Date(e.date)>=n}),i=e.lessonsCompleted.filter(function(e){return new Date(e)>=n});return{weeklyActivity:{quizzes:r.length,lessons:i.length,averageScore:r.length>0?r.reduce(function(e,t){return e+t.score},0)/r.length:0},improvement:this.calculateImprovement(e),strengths:this.identifyStrengths(e),recommendations:this.generateRecommendations(e)}}},{key:"calculateImprovement",value:function(e){if(e.quizScores.length<5)return 0;var t=e.quizScores.slice(-5),n=e.quizScores.slice(-10,-5);return t.reduce(function(e,t){return e+t.score},0)/t.length-n.reduce(function(e,t){return e+t.score},0)/n.length}},{key:"identifyStrengths",value:function(e){var n=[];return Object.entries(e.subjectProgress).forEach(function(e){var r=t(e,2),i=r[0],s=r[1];s.averageScore>=85?n.push({subject:i,level:"excellent"}):s.averageScore>=70&&n.push({subject:i,level:"good"})}),n}},{key:"generateRecommendations",value:function(e){var n=[];e.currentStreak<3&&n.push("Try to maintain a daily learning streak!"),e.averageQuizScore<70&&n.push("Focus on understanding core concepts before moving to advanced topics.");var r=Object.entries(e.subjectProgress).filter(function(e){var n=t(e,2),r=(n[0],n[1]);return r.averageScore<70&&r.total>0});return r.length>0&&n.push("Spend more time practicing ".concat(r.map(function(e){return t(e,1)[0]}).join(" and "),".")),n}},{key:"unlockAchievement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=this.getProgress()),t.achievements.includes(e)||(t.achievements.push(e),this.showAchievementNotification([e]),this.achievements[e]&&this.addPoints(this.achievements[e].points,t),this.saveProgress(t))}}],n&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}());window.progressTracker=s,s.checkDailyGoals||(s.checkDailyGoals=function(){var e=this.getProgress(),t=(new Date).toISOString().split("T")[0];e.lastActiveDate!==t&&(e.dailyGoals={lessons:0,quizzes:0,timeSpent:0},this.saveProgress(e));var n={lessons:e.dailyGoals.lessons>=1,quizzes:e.dailyGoals.quizzes>=1,timeSpent:e.dailyGoals.timeSpent>=30};return n})})();