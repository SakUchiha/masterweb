/*! For license information please see app.3c3d3a5959c970f18af0.js.LICENSE.txt */
(()=>{var e={858:e=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(){var e,n,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.toStringTag||"@@toStringTag";function s(t,i,a,o){var s=i&&i.prototype instanceof l?i:l,u=Object.create(s.prototype);return r(u,"_invoke",function(t,r,i){var a,o,s,l=0,u=i||[],d=!1,v={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return a=n,o=0,s=e,v.n=t,c}};function p(t,r){for(o=t,s=r,n=0;!d&&l&&!i&&n<u.length;n++){var i,a=u[n],p=v.p,f=a[2];t>3?(i=f===r)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=p&&((i=t<2&&p<a[1])?(o=0,v.v=r,v.n=a[1]):p<f&&(i=t<3||a[0]>r||r>f)&&(a[4]=t,a[5]=r,v.n=f,o=0))}if(i||t>1)return c;throw d=!0,r}return function(i,u,f){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),o=u,s=f;(n=o<2?e:s)||!d;){a||(o?o<3?(o>1&&(v.n=-1),p(o,s)):v.n=s:v.v=s);try{if(l=2,a){if(o||(i="next"),n=a[i]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,o<2&&(o=0)}else 1===o&&(n=a.return)&&n.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=e}else if((n=(d=v.n<0)?s:t.call(r,v))!==c)break}catch(n){a=e,o=1,s=n}finally{l=1}}return{value:n,done:d}}}(t,a,o),!0),u}var c={};function l(){}function u(){}function d(){}n=Object.getPrototypeOf;var v=[][a]?n(n([][a]())):(r(n={},a,function(){return this}),n),p=d.prototype=l.prototype=Object.create(v);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,r(p,"constructor",d),r(d,"constructor",u),u.displayName="GeneratorFunction",r(d,o,"GeneratorFunction"),r(p),r(p,o,"Generator"),r(p,a,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:s,m:f}})()}function r(e,n,t,i){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,n,t,i){function o(n,t){r(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!i,configurable:!i,writable:!i}):e[n]=t:(o("next",0),o("throw",1),o("return",2))},r(e,n,t,i)}function i(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var o=e.apply(n,t);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)})}}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var c=function(){return e=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1,this.components=new Map},n=[{key:"init",value:(v=a(t().m(function e(){var n;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.initialized){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,this.initConfig();case 2:return e.n=3,this.initErrorBoundary();case 3:return e.n=4,this.initAPI();case 4:return e.n=5,this.initUI();case 5:return e.n=6,this.initComponents();case 6:return e.n=7,this.checkAPIHealth();case 7:this.initialized=!0,e.n=9;break;case 8:e.p=8,n=e.v,this.handleInitError(n);case 9:return e.a(2)}},e,this,[[1,8]])})),function(){return v.apply(this,arguments)})},{key:"initConfig",value:(d=a(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:if(window.CONFIG){e.n=1;break}throw new Error("Configuration not loaded");case 1:case 2:return e.a(2)}},e)})),function(){return d.apply(this,arguments)})},{key:"initErrorBoundary",value:(u=a(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:if(window.errorBoundary){e.n=1;break}throw new Error("Error boundary not loaded");case 1:case 2:return e.a(2)}},e)})),function(){return u.apply(this,arguments)})},{key:"initAPI",value:(l=a(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:if(window.apiService){e.n=1;break}throw new Error("API service not loaded");case 1:case 2:return e.a(2)}},e)})),function(){return l.apply(this,arguments)})},{key:"initUI",value:(c=a(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:if(window.uiManager){e.n=1;break}throw new Error("UI manager not loaded");case 1:case 2:return e.a(2)}},e)})),function(){return c.apply(this,arguments)})},{key:"initComponents",value:(s=a(t().m(function e(){var n,r;return t().w(function(e){for(;;)switch(e.n){case 0:n=this.getCurrentPage(),r=n,e.n="index"===r?1:"lessons"===r?2:"editor"===r?3:"ai"===r?4:"study-guide"===r?5:"lesson-viewer"===r?6:7;break;case 1:case 5:return this.initProgressDisplay(),e.a(3,7);case 2:return"function"==typeof loadLessons&&loadLessons(),this.initProgressTracking(),e.a(3,7);case 3:case 4:case 6:return this.initProgressTracking(),e.a(3,7);case 7:case 8:return e.a(2)}},e,this)})),function(){return s.apply(this,arguments)})},{key:"checkAPIHealth",value:(i=a(t().m(function e(){return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,apiService.checkAvailability();case 1:e.v||uiManager.showNotification("Backend service is not available. Some features may not work properly.","warning"),e.n=3;break;case 2:e.p=2,e.v,uiManager.showNotification("Unable to connect to backend services. Please check your connection.","warning");case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return i.apply(this,arguments)})},{key:"getCurrentPage",value:function(){return{"index.html":"index","lessons.html":"lessons","editor.html":"editor","ai.html":"ai","study-guide.html":"study-guide","lesson-viewer.html":"lesson-viewer"}[window.location.pathname.split("/").pop()||"index.html"]||"unknown"}},{key:"handleInitError",value:function(e){var n='\n      <div style="text-align: center; padding: 20px;">\n        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: #dc3545; margin-bottom: 1rem;"></i>\n        <h2>Application Failed to Load</h2>\n        <p>Sorry, we encountered an error while loading the application.</p>\n        <p><strong>Error:</strong> '.concat(e.message,'</p>\n        <button onclick="window.location.reload()" class="btn btn-primary" style="margin-top: 1rem;">\n          <i class="fas fa-refresh"></i> Reload Application\n        </button>\n      </div>\n    ');window.uiManager?uiManager.showNotification(n,"error",0):alert("Application failed to load. Please refresh the page.")}},{key:"registerComponent",value:function(e,n){this.components.set(e,n)}},{key:"getComponent",value:function(e){return this.components.get(e)}},{key:"isReady",value:function(){return this.initialized}},{key:"initProgressDisplay",value:function(){window.progressTracker&&window.gamificationSystem&&this.createProgressDashboard()}},{key:"initProgressTracking",value:function(){window.progressTracker&&(window.progressTracker.checkDailyGoals(),this.startTimeTracking())}},{key:"startTimeTracking",value:function(){var e=this;this.pageStartTime=Date.now(),this.timeTrackingInterval=setInterval(function(){Math.floor((Date.now()-e.pageStartTime)/1e3/60)>=1&&window.progressTracker&&(window.progressTracker.addTimeSpent(1),e.pageStartTime=Date.now())},6e4)}},{key:"createProgressDashboard",value:function(){var e=window.progressTracker.getStats(),n=window.gamificationSystem.getCurrentLevel(),t=window.gamificationSystem.getLevelProgress(),r=document.createElement("div");r.id="progress-dashboard",r.className="progress-dashboard",r.innerHTML='\n      <div class="dashboard-header">\n        <h3>üìä Your Learning Progress</h3>\n        <div class="level-display">\n          <span class="level-badge">'.concat(n.badge,'</span>\n          <span class="level-text">Level ').concat(e.level.level,": ").concat(e.level.name,'</span>\n        </div>\n      </div>\n\n      <div class="dashboard-stats">\n        <div class="stat-card">\n          <div class="stat-icon">üìö</div>\n          <div class="stat-value">').concat(e.lessonsCompleted,'</div>\n          <div class="stat-label">Lessons</div>\n        </div>\n        <div class="stat-card">\n          <div class="stat-icon">üéØ</div>\n          <div class="stat-value">').concat(e.averageQuizScore.toFixed(0),'%</div>\n          <div class="stat-label">Avg Score</div>\n        </div>\n        <div class="stat-card">\n          <div class="stat-icon">üî•</div>\n          <div class="stat-value">').concat(e.currentStreak,'</div>\n          <div class="stat-label">Day Streak</div>\n        </div>\n        <div class="stat-card">\n          <div class="stat-icon">‚≠ê</div>\n          <div class="stat-value">').concat(e.points,'</div>\n          <div class="stat-label">Points</div>\n        </div>\n      </div>\n\n      <div class="level-progress">\n        <div class="progress-bar">\n          <div class="progress-fill" style="width: ').concat(t.current,'%"></div>\n        </div>\n        <div class="progress-text">').concat(t.remaining>0?"".concat(t.remaining," points to next level"):"Max level reached!",'</div>\n      </div>\n\n      <div class="recent-achievements">\n        <h4>üèÜ Recent Achievements</h4>\n        <div class="achievement-list">\n          ').concat(e.achievements.slice(-3).map(function(e){return'\n            <div class="achievement-item">\n              <span class="achievement-icon">'.concat(e.icon,'</span>\n              <span class="achievement-name">').concat(e.name,"</span>\n            </div>\n          ")}).join(""),"\n        </div>\n      </div>\n    ");var i=document.querySelector(".features");i&&i.parentNode.insertBefore(r,i)}},{key:"getInfo",value:function(){return{version:"1.0.0",initialized:this.initialized,page:this.getCurrentPage(),config:CONFIG,components:Array.from(this.components.keys()),progressTracking:!!window.progressTracker,gamification:!!window.gamificationSystem}}}],n&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r,i,s,c,l,u,d,v}(),l=new c;function u(e){if(!document.getElementById("sw-update-toast")){var n=document.createElement("div");n.id="sw-update-toast",n.style.position="fixed",n.style.right="20px",n.style.bottom="20px",n.style.background="var(--card, #fff)",n.style.color="var(--text, #111)",n.style.border="1px solid rgba(0,0,0,0.08)",n.style.padding="12px 14px",n.style.borderRadius="8px",n.style.boxShadow="0 6px 20px rgba(0,0,0,0.12)",n.style.zIndex=1e4,n.innerHTML='\n    <div style="display:flex;gap:10px;align-items:center;">\n      <div style="flex:1">A new version is available.</div>\n      <button id="sw-update-btn" style="background:#4f46e5;color:#fff;border:none;padding:8px 10px;border-radius:6px;cursor:pointer">Refresh</button>\n      <button id="sw-update-dismiss" style="background:transparent;color:#666;border:none;padding:6px 8px;border-radius:6px;cursor:pointer">Dismiss</button>\n    </div>\n  ',document.body.appendChild(n);var t=document.getElementById("sw-update-btn"),r=document.getElementById("sw-update-dismiss");t.addEventListener("click",function(){e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"})}),r.addEventListener("click",function(){n.remove()})}}window.kidLearnerApp=l,document.addEventListener("DOMContentLoaded",function(){l.init()}),"serviceWorker"in navigator&&(navigator.serviceWorker.register("/sw.js").then(function(e){e.waiting&&u(e),e.addEventListener("updatefound",function(){var n=e.installing;n.addEventListener("statechange",function(){"installed"===n.state&&navigator.serviceWorker.controller&&u(e)})})}).catch(function(e){}),navigator.serviceWorker.addEventListener("controllerchange",function(){window.location.reload()})),e.exports&&(e.exports=c)}},n={};(function t(r){var i=n[r];if(void 0!==i)return i.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports})(858)})();