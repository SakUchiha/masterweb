class ThemeManager{constructor(){this.themeToggle=null,this.currentTheme=this.getPreferredTheme(),this.init()}init(){this.applyTheme(this.currentTheme),this.setupThemeToggle(),this.setupSystemThemeListener()}getPreferredTheme(){const e=localStorage.getItem("kidlearner-theme");return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}setupThemeToggle(){(window.location.pathname.includes("index.html")||"/"===window.location.pathname||window.location.pathname.endsWith("/"))&&(this.themeToggle=document.getElementById("theme-toggle"),this.themeToggle&&(this.updateToggleState(),this.themeToggle.addEventListener("click",()=>this.toggleTheme())))}setupSystemThemeListener(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("kidlearner-theme")||this.applyTheme(e.matches?"dark":"light")})}applyTheme(e){document.documentElement.setAttribute("data-theme",e),this.currentTheme=e,localStorage.setItem("kidlearner-theme",e),this.updateToggleState(),this.updateThemeElements(e)}updateToggleState(){if(!this.themeToggle)return;const e="dark"===this.currentTheme;this.themeToggle.innerHTML=e?"‚òÄÔ∏è":"üåô",this.themeToggle.setAttribute("aria-label",`Switch to ${e?"light":"dark"} mode`),this.themeToggle.setAttribute("aria-pressed",e),this.themeToggle.classList.add("theme-transition")}updateThemeElements(e){const t="dark"===e;let h=document.querySelector('link[rel="icon"]');h||(h=document.createElement("link"),h.setAttribute("rel","icon"),document.head.appendChild(h));h.href="data:image/svg+xml;utf8,"+(t?'%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"%3E%3Crect width="16" height="16" fill="%23111111"/%3E%3C/svg%3E':'%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"%3E%3Ccircle cx="8" cy="8" r="7" fill="%23667eea"/%3E%3C/svg%3E')}toggleTheme(){const e="dark"===this.currentTheme?"light":"dark";this.applyTheme(e)}static addThemeToggleToNavigation(){const e=document.querySelector(".main-header .container");if(e&&!document.getElementById("theme-toggle")){const t=document.createElement("button");t.id="theme-toggle",t.className="theme-toggle",t.innerHTML='<i class="fas fa-moon"></i>',t.setAttribute("aria-label","Toggle theme"),t.setAttribute("title","Toggle dark/light mode"),e.appendChild(t),window.themeManager&&(window.themeManager.themeToggle=t,window.themeManager.setupThemeToggle())}}getCurrentTheme(){return this.currentTheme}}window.ThemeManager=ThemeManager;const themeManager=new ThemeManager;window.themeManager=themeManager;