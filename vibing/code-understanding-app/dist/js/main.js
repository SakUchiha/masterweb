function handleRoute(){try{const t=window.location.pathname,e=window.location.search;window.location.hash;if("localhost"===window.location.hostname||window.location.hostname,"/"===t||"/index.html"===t)loadPage("home");else if(t.startsWith("/lesson-viewer")){const t=new URLSearchParams(e).get("id");t?(localStorage.setItem("lesson",t),loadLesson(t)):navigateTo("/")}else{const e=t.replace(/^\//,"").replace(/\.html$/,"");loadPage(e||"home")}}catch(t){loadPage("home")}}function navigateTo(t){window.history.pushState({},"",t),handleRoute()}function view(t){navigateTo(`/lesson-viewer?id=${t}`)}function setupNavigation(){document.addEventListener("click",function(t){const e=t.target.closest('a[href^="/"]');if(e){t.preventDefault();const o=e.getAttribute("href");o.startsWith("http")?window.location.href=o:navigateTo(o)}})}function loadPage(t){try{"localhost"===window.location.hostname||window.location.hostname,document.body.setAttribute("data-page",t)}catch(t){}}function loadLesson(t){try{"localhost"===window.location.hostname||window.location.hostname,document.body.setAttribute("data-lesson",t)}catch(t){}}function loadPageContent(t){try{fetch("/"+t).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.text()}).then(t=>{const e=document.getElementById("content");e&&(e.innerHTML=t)}).catch(t=>{const e=document.getElementById("content");e&&(e.innerHTML='<div style="padding: 20px; text-align: center;"><h2>Page Load Error</h2><p>Sorry, we couldn\'t load this page. Please try again later.</p></div>')})}catch(t){}}document.addEventListener("DOMContentLoaded",function(){try{setupNavigation(),handleRoute(),window.addEventListener("popstate",handleRoute)}catch(t){document.body.innerHTML='<div style="padding: 20px; text-align: center;"><h1>Application Error</h1><p>Please refresh the page to try again.</p></div>'}});