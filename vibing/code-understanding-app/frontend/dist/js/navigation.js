class NavigationManager{constructor(){this.pages=["index.html","lessons.html","editor.html","ai.html","ask-ai.html","code-explainer.html","study-guide.html"],this.currentPage=this.getCurrentPage(),this.mobileMenuOpen=!1,this.init()}init(){this.createNavigationButtons(),this.updateButtonStates(),this.initMobileMenu(),this.initTouchGestures(),this.initKeyboardNavigation(),this.addButtonFeedback()}getCurrentPage(){return window.location.pathname.split("/").pop()||"index.html"}createNavigationButtons(){window.ThemeManager&&window.ThemeManager.addThemeToggleToNavigation&&window.ThemeManager.addThemeToggleToNavigation();const e=document.createElement("div");e.className="nav-buttons";const t=document.createElement("button");t.className="nav-btn back",t.innerHTML='<i class="fas fa-arrow-left"></i>',t.title="Go Back",t.setAttribute("aria-label","Go to previous page"),t.onclick=()=>this.goBack();const n=document.createElement("button");n.className="nav-btn forward",n.innerHTML='<i class="fas fa-arrow-right"></i>',n.title="Go Forward",n.setAttribute("aria-label","Go to next page"),n.onclick=()=>this.goForward(),e.appendChild(t),e.appendChild(n),document.body.appendChild(e)}updateButtonStates(){const e=this.pages.indexOf(this.currentPage),t=document.querySelector(".nav-btn.back"),n=document.querySelector(".nav-btn.forward");t&&n&&(t.disabled=e<=0,n.disabled=e>=this.pages.length-1)}goBack(){const e=this.pages.indexOf(this.currentPage);if(e>0){const t=this.pages[e-1];this.navigateToPage(t)}}goForward(){const e=this.pages.indexOf(this.currentPage);if(e<this.pages.length-1){const t=this.pages[e+1];this.navigateToPage(t)}}navigateToPage(e){window.router?(document.body.style.opacity="0.7",setTimeout(()=>{window.router.navigate(e),document.body.style.opacity="1"},150)):window.location.href=e}initMobileMenu(){const e=document.createElement("button");e.className="mobile-menu-toggle",e.innerHTML="&#9776;",e.setAttribute("aria-label","Toggle menu"),document.body.appendChild(e),e.addEventListener("click",()=>{this.toggleMobileMenu()}),document.addEventListener("click",e=>{const t=document.querySelector(".mobile-nav"),n=document.querySelector(".mobile-menu-toggle");!this.mobileMenuOpen||t.contains(e.target)||n.contains(e.target)||this.closeMobileMenu()});document.querySelectorAll(".mobile-nav .nav-link").forEach(e=>{e.addEventListener("click",()=>this.closeMobileMenu())})}toggleMobileMenu(){const e=document.querySelector(".mobile-nav");document.querySelector(".mobile-menu-toggle");e?this.mobileMenuOpen?this.closeMobileMenu():this.openMobileMenu():this.createMobileMenu()}openMobileMenu(){const e=document.querySelector(".mobile-nav"),t=document.querySelector(".mobile-menu-toggle");if(e&&t){e.classList.add("open"),t.innerHTML='<i class="fas fa-times"></i>',t.setAttribute("aria-expanded","true"),this.mobileMenuOpen=!0;const n=e.querySelector(".nav-link");n&&n.focus()}}createMobileMenu(){const e=document.createElement("nav");e.className="mobile-nav";const t=document.createElement("div");t.className="nav-links";const n=document.querySelector(".main-nav");if(n){n.querySelectorAll(".nav-link").forEach(e=>{const n=e.cloneNode(!0);t.appendChild(n)})}e.appendChild(t),document.querySelector(".main-header .container").appendChild(e);t.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",()=>this.closeMobileMenu())}),this.openMobileMenu()}closeMobileMenu(){const e=document.querySelector(".mobile-nav"),t=document.querySelector(".mobile-menu-toggle");e&&t&&(e.classList.remove("open"),t.innerHTML='<i class="fas fa-bars"></i>',t.setAttribute("aria-expanded","false"),this.mobileMenuOpen=!1)}initTouchGestures(){let e=0,t=0,n=0;document.addEventListener("touchstart",o=>{e=o.touches[0].clientX,t=o.touches[0].clientY,n=Date.now()},{passive:!0}),document.addEventListener("touchend",o=>{if(!e||!t)return;const a=o.changedTouches[0].clientX,i=o.changedTouches[0].clientY,s=Date.now(),r=e-a,c=t-i,l=s-n;Math.abs(r)>Math.abs(c)&&Math.abs(r)>50&&l<500&&(r>0?(this.goForward(),this.showSwipeFeedback("forward")):(this.goBack(),this.showSwipeFeedback("back")),document.dispatchEvent(new CustomEvent("swipeNavigation"))),e=0,t=0,n=0},{passive:!0})}showSwipeFeedback(e){const t=document.createElement("div");t.className=`swipe-feedback swipe-${e}`,t.innerHTML="forward"===e?'<i class="fas fa-arrow-right"></i>':'<i class="fas fa-arrow-left"></i>',t.style.cssText=`\n      position: fixed;\n      top: 50%;\n      ${"forward"===e?"right: 20px;":"left: 20px;"}\n      transform: translateY(-50%);\n      background: var(--primary);\n      color: white;\n      padding: 10px 15px;\n      border-radius: 50px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      z-index: 10000;\n      animation: swipeFeedback 0.5s ease-out;\n      pointer-events: none;\n    `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.remove()},500)}addButtonFeedback(){document.querySelectorAll(".nav-btn").forEach(e=>{e.addEventListener("click",()=>{e.style.transform="scale(0.95)",setTimeout(()=>{e.style.transform=""},150)})})}initKeyboardNavigation(){document.addEventListener("keydown",e=>{e.altKey&&("ArrowLeft"===e.key?(e.preventDefault(),this.goBack()):"ArrowRight"===e.key&&(e.preventDefault(),this.goForward())),"Escape"===e.key&&this.mobileMenuOpen&&this.closeMobileMenu()})}}document.addEventListener("DOMContentLoaded",()=>{new NavigationManager});